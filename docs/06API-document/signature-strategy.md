---
title: 签名续期问题
sidebar_position: 4
---

石墨 SDK 在进行数据传输时，会使用签名作为校验方法。签名过期导致的报错是对接时的常见问题，使用建议的签名续期策略能够帮您快速解决问题。

## 签名的种类

在使用石墨 SDK 的过程中，有两种签名，分别是 signature 和 token。
signature 用于石墨服务端鉴权，token 用于客户服务端鉴权和传递信息。它们由接入方服务端计算得出，通过接口提供给接入方前端。

## 签名的过期时间的计算

签名的过期时间是一个绝对时间，超过这个时间点的请求都被认为是过期请求。

过期时间 = 当前时间 + 有效期

## 签名续期策略

接入方在对接石墨的前端 js-sdk 时，可使用 setCredentials() 方法设置和更新这两种签名。

由于 signature 存在过期时间，同时 token 通常也应存在过期时间，这两种签名如果在过期前没有及时更新，会导致接口报错，使用户访问异常。

我们建议设置签名的有效期为 7 天，并在前端设置一个定时任务，每 10 分钟检查一次当前签名剩余时间，如果剩余时间少于 3.5 天，则重新从服务端获取最新的签名，并通过 setCredentials() 来更新。
